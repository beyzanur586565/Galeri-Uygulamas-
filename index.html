<!doctype html>
<html lang="tr">
<head>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title> Fotoðraf Galerisi </title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            font-family: Inter, 'Segoe UI', system-ui, -apple-system, 'Helvetica Neue', Arial;
            background-color: #f7f7f9;
        }

        .gorsel-kutu img {
            width: 100%;
            height: 220px;
            object-fit: cover;
            border-radius: 8px;
        }

        .gorsel-kutu {
            cursor: pointer
        }

            .gorsel-kutu:hover {
                transform: translateY(-4px);
                transition: all .2s
            }

        #galeri {
            min-height: 60px
        }

        .kategori-btn.active {
            box-shadow: 0 0 0 0.15rem rgba(13,110,253,.15)
        }

        .card-img-top {
            height: 150px;
            object-fit: cover
        }
    </style>
</head>
<body>
    <div class="container py-4">
        <div class="text-center mb-4">
            <h1 class="h3">Fotoðraf Galerisi — Grid Düzeni</h1>
            <p class="text-muted small">Çift týkla büyüt — beðen (favori) ekle — arama ve kategori filtreleme</p>
        </div>

        <div class="d-flex flex-wrap gap-2 justify-content-center mb-3">
            <input id="arama" class="form-control form-control-sm w-auto" placeholder="Baþlýða/ Açýklamaya göre ara...">
            <div id="kategoriGruplari" class="btn-group" role="group" aria-label="Kategoriler">
                <button class="btn btn-outline-secondary btn-sm kategori-btn active" data-kategori="Hepsi">Hepsi</button>
                <button class="btn btn-outline-secondary btn-sm kategori-btn" data-kategori="Doða">Doða</button>
                <button class="btn btn-outline-secondary btn-sm kategori-btn" data-kategori="Þehir">Þehir</button>
                <button class="btn btn-outline-secondary btn-sm kategori-btn" data-kategori="Hayvan">Hayvan</button>
                <button class="btn btn-outline-secondary btn-sm kategori-btn" data-kategori="Manzara">Manzara</button>
                <button class="btn btn-outline-secondary btn-sm kategori-btn" data-kategori="Etkinlik">Etkinlik</button>
            </div>
            <div class="ms-2 align-self-center text-muted small">Favoriler: <strong id="favoriSayac">0</strong></div>
        </div>

        <div id="galeri" class="row g-3"></div>

        <hr>
        <h5>Favoriler</h5>
        <div id="favoriListesi" class="row g-3 mb-5"></div>

    </div>

    <!-- Modal (Bootstrap) - büyük resim gösterimi -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-labelledby="imageModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content bg-dark text-white">
                <div class="modal-body text-center py-3">
                    <img id="modalImage" src="" alt="" class="img-fluid rounded mb-2">
                    <h6 id="modalTitle"></h6>
                    <p id="modalDesc" class="small text-white-50"></p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="modalFavoriBtn">Favorilere Ekle</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Veri kümesi (resimler)
        const resimler = [
            { id: 1, baslik: 'Dað Yolu', src: 'https://picsum.photos/id/1018/1000/700', aciklama: 'Yeþilliklerle çevrili kývrýmlý bir dað yolu.', kategori: 'Doða' },
            { id: 2, baslik: 'Sevimli Köpek', src: 'https://picsum.photos/id/1025/1000/700', aciklama: 'Küçük bir köpek, sevimli duruþ.', kategori: 'Hayvan' },
            { id: 3, baslik: 'Siyah Köpek', src: 'https://picsum.photos/id/237/1000/700', aciklama: 'Siyah tüylü köpek.', kategori: 'Hayvan' },
            { id: 4, baslik: 'Þelale', src: 'https://picsum.photos/id/1035/1000/700', aciklama: 'Þelale ve gökkuþaðý manzarasý.', kategori: 'Doða' },
            { id: 5, baslik: 'Hýrçýn Deniz', src: 'https://picsum.photos/id/1041/1000/700', aciklama: 'Dalgalý ve dramatik deniz.', kategori: 'Doða' },
            { id: 6, baslik: 'Buz Üzerinde', src: 'https://picsum.photos/id/1056/1000/700', aciklama: 'Buzlarýn üzerinde insanlar.', kategori: 'Doða' },
            { id: 7, baslik: 'Fýrtýnalý Deniz', src: 'https://picsum.photos/id/1050/1000/700', aciklama: 'Daðdan denize bakýþ.', kategori: 'Doða' },
            { id: 8, baslik: 'Modern Bina', src: 'https://picsum.photos/id/1076/1000/700', aciklama: 'Cam ve metal cepheli bina.', kategori: 'Þehir' },
            { id: 9, baslik: 'Foklar', src: 'https://picsum.photos/id/1084/1000/700', aciklama: 'Su kenarýnda dinlenen foklar.', kategori: 'Hayvan' },
            { id: 10, baslik: 'Gün Batýmý', src: 'https://picsum.photos/id/109/1000/700', aciklama: 'Gün batýmýnda otlar.', kategori: 'Doða' },
            { id: 11, baslik: 'Çayýrdaki Atlar', src: 'https://picsum.photos/id/110/1000/700', aciklama: 'Altý-yedi at otluyor.', kategori: 'Doða' },
            { id: 12, baslik: 'Nostaljik Araba', src: 'https://picsum.photos/id/111/1000/700', aciklama: 'Eski model araba.', kategori: 'Þehir' },
            { id: 13, baslik: 'Buðday Tarlasý', src: 'https://picsum.photos/id/112/1000/700', aciklama: 'Altýn buðday baþaklarý.', kategori: 'Doða' },
            { id: 14, baslik: 'Yýldýzlý Gökyüzü', src: 'https://picsum.photos/id/120/1000/700', aciklama: 'Gece gökyüzü yýldýzlarla dolu.', kategori: 'Manzara' },
            { id: 15, baslik: 'Sisli Gökyüzü', src: 'https://picsum.photos/id/114/1000/700', aciklama: 'Yoðun sisli manzara.', kategori: 'Doða' },
            { id: 16, baslik: 'Yaðmur Ýzleri', src: 'https://picsum.photos/id/115/1000/700', aciklama: 'Islak zeminde yansýyan ýþýk.', kategori: 'Doða' },
            { id: 17, baslik: 'Çiftlik Evi', src: 'https://picsum.photos/id/116/1000/700', aciklama: 'Aðaçlarla çevrili çiftlik evi.', kategori: 'Doða' },
            { id: 18, baslik: 'Konser', src: 'https://picsum.photos/id/117/1000/700', aciklama: 'Kalabalýk konser sahnesi.', kategori: 'Etkinlik' }
        ];

        // Elemanlar
        const galeriEl = document.getElementById('galeri');
        const favoriListesiEl = document.getElementById('favoriListesi');
        const favoriSayacEl = document.getElementById('favoriSayac');
        const aramaInput = document.getElementById('arama');
        const kategoriBtns = document.querySelectorAll('.kategori-btn');
        const modalEl = document.getElementById('imageModal');
        const modalImage = document.getElementById('modalImage');
        const modalTitle = document.getElementById('modalTitle');
        const modalDesc = document.getElementById('modalDesc');
        const modalFavoriBtn = document.getElementById('modalFavoriBtn');
        const bsModal = new bootstrap.Modal(modalEl);

        // Favoriler (id dizisi) - localStorage ile kalýcýlaþtýrma
        let favoriler = [];
        try { const stored = localStorage.getItem('favoriler_v1'); if (stored) favoriler = JSON.parse(stored); } catch (e) { favoriler = []; }

        // Render galeriyi oluþtur
        function renderGaleri(list) {
            galeriEl.innerHTML = '';
            if (!list.length) {
                galeriEl.innerHTML = '<div class="col-12 text-center text-muted py-4">Görsel bulunamadý.</div>';
                return;
            }
            list.forEach(item => {
                const col = document.createElement('div');
                col.className = 'col-12 col-sm-6 col-md-4';
                col.innerHTML = `
                      <div class="card border-0 shadow-sm gorsel-kutu" data-id="${item.id}" tabindex="0">
                        <img loading="lazy" src="${item.src}" alt="${item.baslik}" class="card-img-top">
                        <div class="card-body p-2">
                          <div class="d-flex justify-content-between align-items-start">
                            <div>
                              <h6 class="mb-1 small">${item.baslik}</h6>
                              <div class="small text-muted">${item.kategori}</div>
                            </div>
                            <div>
                              <button class="btn btn-sm btn-outline-success favori-btn" data-id="${item.id}" title="Favoriye ekle">Favoriye ekle</button>
                            </div>
                          </div>
                        </div>
                      </div>`;
                galeriEl.appendChild(col);
            });
        }

        // Render favorileri oluþtur
        function renderFavoriler() {
            favoriListesiEl.innerHTML = '';
            if (!favoriler.length) {
                favoriListesiEl.innerHTML = '<div class="col-12 text-muted small">Henüz favori eklenmedi.</div>';
            } else {
                // favoriler dizisi id tutuyor
                favoriler.forEach(id => {
                    const img = resimler.find(r => r.id === id);
                    if (!img) return;
                    const col = document.createElement('div');
                    col.className = 'col-12 col-sm-6 col-md-4';
                    col.innerHTML = `
                        <div class="card h-100 shadow-sm">
                          <img loading="lazy" src="${img.src}" alt="${img.baslik}" class="card-img-top">
                          <div class="card-body">
                            <h6 class="card-title mb-1 small">${img.baslik}</h6>
                            <p class="card-text small text-muted">${img.kategori}</p>
                            <div class="d-flex justify-content-between">
                              <button class="btn btn-sm btn-outline-danger favori-sil-btn" data-id="${img.id}">Kaldýr</button>
                              <button class="btn btn-sm btn-outline-primary" data-id="${img.id}" onclick="viewFromFavorite(${img.id})">Büyüt</button>
                            </div>
                          </div>
                        </div>`;
                    favoriListesiEl.appendChild(col);
                });
            }
            favoriSayacEl.textContent = favoriler.length;
            saveFavoriler();
        }

        // LocalStorage kaydet
        function saveFavoriler() {
            try { localStorage.setItem('favoriler_v1', JSON.stringify(favoriler)); } catch (e) { }
        }

        // Favori ekle
        function addFavorite(id) {
            id = Number(id);
            if (favoriler.includes(id)) {
                // zaten var
                showToast('Bu görsel zaten favorilerde.');
                return;
            }
            favoriler.push(id);
            renderFavoriler();
            showToast('Favorilere eklendi.');
        }

        // Favori kaldýr
        function removeFavorite(id) {
            id = Number(id);
            favoriler = favoriler.filter(x => x !== id);
            renderFavoriler();
        }

        // Bir karttan büyük gösterim
        let currentModalId = null;
        function openModalById(id) {
            const item = resimler.find(r => r.id === Number(id));
            if (!item) return;
            currentModalId = item.id;
            modalImage.src = item.src;
            modalImage.alt = item.baslik;
            modalTitle.textContent = item.baslik;
            modalDesc.textContent = item.aciklama;
            bsModal.show();
        }

        // View from favorite (global function used in button inline to keep code simple for favorite button inside favorites)
        window.viewFromFavorite = function (id) { openModalById(id); }

        // Kullanýcýya bildirim (basit)
        function showToast(text) {
            // geçici alert yerine küçük kendi gösterimimiz
            const el = document.createElement('div');
            el.className = 'position-fixed top-0 end-0 m-3 p-2 bg-dark text-white small rounded shadow';
            el.style.zIndex = 2000;
            el.textContent = text;
            document.body.appendChild(el);
            setTimeout(() => el.classList.add('opacity-0'), 2000);
            setTimeout(() => el.remove(), 2600);
        }

        // Event delegation: galeri içinde týklama ve çift týk
        galeriEl.addEventListener('click', (e) => {
            const favBtn = e.target.closest('.favori-btn');
            if (favBtn) { addFavorite(favBtn.dataset.id); return; }
        });

        galeriEl.addEventListener('dblclick', (e) => {
            const card = e.target.closest('.gorsel-kutu');
            if (card) { const id = card.getAttribute('data-id'); openModalById(id); }
        });

        // Favori listesi týklama (kaldýr)
        favoriListesiEl.addEventListener('click', (e) => {
            const sil = e.target.closest('.favori-sil-btn');
            if (sil) { removeFavorite(sil.dataset.id); }
        });

        // Modal içindeki favori butonu
        modalFavoriBtn.addEventListener('click', () => { if (currentModalId) addFavorite(currentModalId); });

        // Arama
        aramaInput.addEventListener('input', () => { applyFilters(); });

        // Kategori butonlarý
        kategoriBtns.forEach(b => b.addEventListener('click', () => {
            kategoriBtns.forEach(x => x.classList.remove('active'));
            b.classList.add('active');
            applyFilters();
        }));

        // Filtreleri uygula
        function applyFilters() {
            const q = aramaInput.value.trim().toLowerCase();
            const aktifKategori = document.querySelector('.kategori-btn.active').dataset.kategori;
            const filtered = resimler.filter(r => {
                const matchesQ = (r.baslik + ' ' + r.aciklama).toLowerCase().includes(q);
                const matchesCat = (aktifKategori === 'Hepsi') || (r.kategori === aktifKategori);
                return matchesQ && matchesCat;
            });
            renderGaleri(filtered);
        }

        // Ýlk render
        renderGaleri(resimler);
        renderFavoriler();

        // ESC ile modal kapatma (ekstra güvenlik)
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape') bsModal.hide(); });

        // Responsive accessibility: Enter tuþuyla kartý aç
        galeriEl.addEventListener('keydown', (e) => {
            const card = e.target.closest('.gorsel-kutu');
            if (!card) return;
            if (e.key === 'Enter') openModalById(card.getAttribute('data-id'));
        });

    </script>
</body>
</html>
